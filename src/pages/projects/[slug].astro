---
import { getCollection } from 'astro:content';
import Layout from '@layouts/Layout.astro';


export async function getStaticPaths() {
  const projects = await getCollection('projects');
  return projects.map((project) => ({
    params: { slug: project.slug },
  }));
}

const { slug } = Astro.params;
const projects = await getCollection('projects');
const project = projects.find((p) => p.slug === slug);

if (!project) {
  throw new Error(`Project not found for slug: ${slug}`);
}
---

<Layout>
  <main>
    <section>
      <h1>{project.data.title}</h1>
      <p>{project.data.description}</p>
      <ul>
        {project.data.tags.map((tag) => <li>{tag}</li>)}
      </ul>
    </section>
  </main>
</Layout>
