---
import Layout from '@layouts/Layout.astro';
import BackToTop from '@components/ui/BackToTop.astro';

const contactInfo = {
	email: 'Gauthier.34m@gmail.com',
	linkedin: 'https://www.linkedin.com/in/gauthier-souquet-878aab202/',
};
---

<Layout>
	<main class="min-h-screen rounded-2xl border-2 border-gray-200 dark:border-gray-700">
		<!-- Hero Section -->
		<section class="relative rounded-b-3xl px-7 py-20  text-center shadow-sm">
			<div class="relative mx-auto rounded-2xl pb-5 pt-5 shadow-lg dark:bg-gray-800">
				<div class="mb-6 text-6xl">üìû</div>
				<h1
					class="mb-6 font-monospace text-4xl leading-tight text-gray-900 dark:text-gray-100 lg:text-6xl"
				>
					Parlons de votre <span class="text-red-600 dark:text-red-500">projet</span>
				</h1>
				<p class="mx-auto max-w-2xl text-xl leading-relaxed text-gray-600 dark:text-gray-300">
					Vous avez une id√©e ? Un projet ? Ou simplement envie d'√©changer ? Je serais ravi de
					discuter avec vous de vos besoins.
				</p>
			</div>
		</section>

		<!-- Contact Section -->
		<section class="relative rounded-b-3xl px-4 py-20 text-center shadow-sm">
			<div
				class="relative mx-auto mb-8 max-w-5xl rounded-2xl bg-white px-8 py-6 shadow-lg dark:bg-gray-800"
			>
				<span
					class="orange mb-5 inline-block rounded-full px-5 py-2.5 text-sm font-semibold text-white shadow-sm dark:bg-blue-700"
				>
					Restons connect√©s
				</span>
				<h2
					class="mb-5 font-monospace text-3xl font-bold text-gray-900 dark:text-gray-100 lg:text-5xl"
				>
					Contactez-moi
				</h2>
				<div class="mx-auto h-1.5 w-24 rounded-full bg-orange-500 dark:bg-orange-600"></div>
			</div>

			<div class="mx-auto grid max-w-5xl items-start gap-8 lg:grid-cols-2">
				<>
					<!-- Email Card -->
					<div
						class="rounded-3xl border-2 border-gray-100 bg-white p-8 shadow-md transition-all duration-300 hover:border-orange-200 hover:shadow-xl dark:border-gray-700 dark:bg-gray-800 dark:hover:border-orange-800"
					>
						<div class="mb-5 flex items-center">
							<div class="mr-4 rounded-2xl bg-orange-50 p-3 text-4xl dark:bg-orange-900/20">üìß</div>
							<h3 class="text-2xl font-bold text-gray-900 dark:text-gray-100">Email</h3>
						</div>
						<p class="mb-5 text-base leading-relaxed text-gray-600 dark:text-gray-300">
							Pour toute demande professionnelle, question technique ou simplement pour √©changer sur
							un projet.
						</p>
						<a
							href={`mailto:${contactInfo.email}`}
							class="inline-flex items-center text-lg font-bold text-orange-600 transition-colors duration-200 hover:text-orange-700 dark:text-orange-400 dark:hover:text-orange-300"
							rel="noopener noreferrer"
						>
							{contactInfo.email}
							<span class="ml-2 text-xl">‚Üí</span>
						</a>
					</div>

					<!-- LinkedIn Card -->
					<div
						class="rounded-3xl border-2 border-gray-100 bg-white p-8 shadow-md transition-all duration-300 hover:border-blue-200 hover:shadow-xl dark:border-gray-700 dark:bg-gray-800 dark:hover:border-blue-800"
					>
						<div class="mb-5 flex items-center">
							<div class="mr-4 rounded-2xl bg-blue-50 p-3 text-4xl dark:bg-blue-900/20">üíº</div>
							<h3 class="text-2xl font-bold text-gray-900 dark:text-gray-100">LinkedIn</h3>
						</div>
						<p class="mb-5 text-base leading-relaxed text-gray-600 dark:text-gray-300">
							Connectons-nous sur LinkedIn pour √©changer sur nos exp√©riences et rester en contact
							professionnel.
						</p>
						<a
							href={contactInfo.linkedin}
							target="_blank"
							rel="noopener noreferrer"
							class="inline-flex items-center text-lg font-bold text-blue-600 transition-colors duration-200 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"
						>
							Mon profil LinkedIn
							<span class="ml-2 text-xl">‚Üí</span>
						</a>
					</div>
					<!--
					<div class="bg-gradient-to-br from-orange-500 to-blue-600 p-8 rounded-2xl text-white shadow-lg">
						<h3 class="text-2xl font-bold mb-6">Envoyez-moi un message</h3>

						<div id="status-message" class="hidden mb-4 p-4 rounded-lg"></div>

						<form
							id="contact-form"
							method="POST"
							action="/api/contact"
							class="space-y-6"
						>
							<div>
								<label for="name" class="block text-sm font-medium text-white/90 mb-2">
									Nom
								</label>
								<input
									required
									type="text"
									name="name"
									id="name"
									placeholder="Votre nom"
									class="w-full rounded-lg border-0 px-4 py-3 text-gray-900 placeholder-gray-400 focus:ring-2 focus:ring-white/30 focus:outline-none"
								/>
							</div>

							<div>
								<label for="email" class="block text-sm font-medium text-white/90 mb-2">
									Email
								</label>
								<input
									required
									type="email"
									name="email"
									id="email"
									placeholder="votre.email@exemple.com"
									class="w-full rounded-lg border-0 px-4 py-3 text-gray-900 placeholder-gray-400 focus:ring-2 focus:ring-white/30 focus:outline-none"
								/>
							</div>

							<div>
								<label for="message" class="block text-sm font-medium text-white/90 mb-2">
									Message
								</label>
								<textarea
									required
									name="message"
									id="message"
									rows="4"
									placeholder="Votre message..."
									class="w-full rounded-lg border-0 px-4 py-3 resize-none text-gray-900 placeholder-gray-400 focus:ring-2 focus:ring-white/30 focus:outline-none"
								></textarea>
							</div>

							<button
								type="submit"
								id="submit-button"
								class="w-full bg-white text-orange-600 font-bold px-6 py-3 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-white/30 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
							>
								<span id="button-text">Envoyer le message</span>
								<span id="loading-spinner" class="hidden">
									<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-orange-600 inline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
										<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
										<path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
									</svg>
									Envoi en cours...
								</span>
							</button>
						</form>
					</div>-->
				</div>
			</div>
		</section>

		<!-- Additional Info Section -->
		<section class="relative rounded-b-3xl px-4 py-20 text-center shadow-sm">
			<div
				class="relative mx-auto mb-8 max-w-5xl rounded-2xl bg-white px-8 py-6 shadow-lg dark:bg-gray-800"
			>
				<span
					class="mb-5 inline-block rounded-full bg-blue-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm dark:bg-blue-700"
				>
					Informations pratiques
				</span>
				<h2
					class="mb-5 font-monospace text-3xl font-bold text-gray-900 dark:text-gray-100 lg:text-5xl"
				>
					√Ä propos de mes r√©ponses
				</h2>
				<div class="mx-auto h-1.5 w-24 rounded-full bg-blue-600 dark:bg-blue-700"></div>
			</div>

			<div class="mx-auto grid max-w-5xl gap-8 text-center md:grid-cols-3">
				<!-- Temps de r√©ponse -->
				<div
					class="group rounded-3xl border-2 border-emerald-100 bg-emerald-50 p-10 transition-all duration-300 hover:border-emerald-200 hover:shadow-xl dark:border-emerald-800/50 dark:bg-emerald-900/30 dark:hover:border-emerald-700"
				>
					<div class="mb-5 text-5xl transition-transform duration-300 group-hover:scale-110">
						‚ö°
					</div>
					<h3 class="mb-4 text-2xl font-bold text-emerald-700 dark:text-emerald-400">
						R√©ponse rapide
					</h3>
					<p class="text-base leading-relaxed text-gray-700 dark:text-gray-300">
						Je m'engage √† r√©pondre √† vos messages dans les <span
							class="font-bold text-emerald-600 dark:text-emerald-400">24 heures</span
						> maximum.
					</p>
				</div>

				<!-- Disponibilit√© -->
				<div
					class="group rounded-3xl border-2 border-indigo-100 bg-indigo-50 p-10 transition-all duration-300 hover:border-indigo-200 hover:shadow-xl dark:border-indigo-800/50 dark:bg-indigo-900/30 dark:hover:border-indigo-700"
				>
					<div class="mb-5 text-5xl transition-transform duration-300 group-hover:scale-110">
						üìÖ
					</div>
					<h3 class="mb-4 text-2xl font-bold text-indigo-700 dark:text-indigo-400">
						Disponibilit√©
					</h3>
					<p class="text-base leading-relaxed text-gray-700 dark:text-gray-300">
						Ouvert aux <span class="font-bold text-indigo-600 dark:text-indigo-400">stages</span>, <span
							class="font-bold text-indigo-600 dark:text-indigo-400">missions freelance</span
						> et <span class="font-bold text-indigo-600 dark:text-indigo-400">collaborations</span> √©tudiantes.
					</p>
				</div>

				<!-- Localisation -->
				<div
					class="group rounded-3xl border-2 border-violet-100 bg-violet-50 p-10 transition-all duration-300 hover:border-violet-200 hover:shadow-xl dark:border-violet-800/50 dark:bg-violet-900/30 dark:hover:border-violet-700"
				>
					<div class="mb-5 text-5xl transition-transform duration-300 group-hover:scale-110">
						üìç
					</div>
					<h3 class="mb-4 text-2xl font-bold text-violet-700 dark:text-violet-400">Localisation</h3>
					<p class="text-base leading-relaxed text-gray-700 dark:text-gray-300">
						Bas√© dans l'<span class="font-bold text-violet-600 dark:text-violet-400">H√©rault</span>,
						disponible pour du <span class="font-bold text-violet-600 dark:text-violet-400"
							>t√©l√©travail</span
						> ou sur site.
					</p>
				</div>
			</div>
		</section>
	</main>
</Layout>

<BackToTop />

<script>
	// Gestion du formulaire de contact
	document.addEventListener('DOMContentLoaded', function () {
		const form = document.getElementById('contact-form');
		const statusMessage = document.getElementById('status-message');
		const submitButton = document.getElementById('submit-button');
		const buttonText = document.getElementById('button-text');
		const loadingSpinner = document.getElementById('loading-spinner');

		// Fonction pour afficher les messages de statut
		function showStatus(message, type) {
			statusMessage.textContent = message;
			statusMessage.className = `mb-4 p-4 rounded-lg ${
				type === 'success'
					? 'bg-green-100 text-green-800 border border-green-200'
					: 'bg-red-100 text-red-800 border border-red-200'
			}`;
			statusMessage.classList.remove('hidden');

			// Faire d√©filer vers le message
			statusMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
		}

		// Fonction pour masquer le message de statut
		function hideStatus() {
			statusMessage.classList.add('hidden');
		}

		// Fonction pour g√©rer l'√©tat du bouton
		function setLoading(loading) {
			submitButton.disabled = loading;
			if (loading) {
				buttonText.classList.add('hidden');
				loadingSpinner.classList.remove('hidden');
			} else {
				buttonText.classList.remove('hidden');
				loadingSpinner.classList.add('hidden');
			}
		}

		// Gestion de la soumission du formulaire
		form.addEventListener('submit', async function (e) {
			e.preventDefault();

			// Masquer les messages pr√©c√©dents
			hideStatus();
			setLoading(true);

			try {
				// R√©cup√©ration des donn√©es du formulaire
				const formData = new FormData(form);

				// Envoi de la requ√™te
				const response = await fetch('/api/contact', {
					method: 'POST',
					body: formData,
				});

				const result = await response.json();

				if (result.success) {
					showStatus('‚úÖ Message envoy√© avec succ√®s ! Je vous r√©pondrai rapidement.', 'success');
					form.reset(); // R√©initialiser le formulaire
				} else {
					showStatus(`‚ùå Erreur : ${result.error}`, 'error');
				}
			} catch (error) {
				console.error("Erreur lors de l'envoi:", error);
				showStatus('‚ùå Erreur de connexion. Veuillez r√©essayer plus tard.', 'error');
			} finally {
				setLoading(false);
			}
		});

		// Masquer le message de statut lors de la saisie
		form.addEventListener('input', function () {
			if (!statusMessage.classList.contains('hidden')) {
				setTimeout(hideStatus, 3000);
			}
		});
	});
</script>
